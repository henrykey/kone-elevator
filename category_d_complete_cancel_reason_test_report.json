{
  "test_suite": "Category D Complete Cancel Reason Patch Test",
  "timestamp": "2025-08-15T18:47:01.867372",
  "patch_requirements": {
    "target": "Test 16-20: 错误响应增加 cancel reason 精确匹配",
    "enhancement": "Cancel Reason 映射 + 精确验证 + 错误分类"
  },
  "total_scenarios": 12,
  "passed_scenarios": 12,
  "partial_scenarios": 0,
  "error_scenarios": 0,
  "cancel_reason_patch_stats": {
    "total_scenarios": 12,
    "cancel_reason_matched": 7,
    "cancel_reason_expected": 7,
    "validation_method_working": 5
  },
  "patch_features": {
    "cancel_reason_mapping": "Error type to reason mapping",
    "_validate_cancel_reason_patch": "Core validation method",
    "precise_match": "Exact reason matching logic",
    "error_classification": "Detailed error categorization"
  },
  "test_results": [
    {
      "scenario": "负数楼层",
      "status": "PASS",
      "duration_ms": 101.26376152038574,
      "expected_cancel_reason": "INVALID_FLOOR",
      "actual_cancel_reason": "INVALID_FLOOR",
      "cancel_reason_match": true
    },
    {
      "scenario": "超大楼层",
      "status": "PASS",
      "duration_ms": 101.26495361328125,
      "expected_cancel_reason": "INVALID_FLOOR",
      "actual_cancel_reason": "INVALID_FLOOR",
      "cancel_reason_match": true
    },
    {
      "scenario": "正常楼层",
      "status": "PASS",
      "duration_ms": 101.49908065795898,
      "expected_cancel_reason": null,
      "actual_cancel_reason": null,
      "cancel_reason_match": true
    },
    {
      "scenario": "1楼到1楼",
      "status": "PASS",
      "duration_ms": 101.46212577819824,
      "expected_cancel_reason": "SAME_FLOOR",
      "actual_cancel_reason": "SAME_FLOOR",
      "cancel_reason_match": true
    },
    {
      "scenario": "2楼到2楼",
      "status": "PASS",
      "duration_ms": 101.58228874206543,
      "expected_cancel_reason": "SAME_FLOOR",
      "actual_cancel_reason": "SAME_FLOOR",
      "cancel_reason_match": true
    },
    {
      "scenario": "不同楼层",
      "status": "PASS",
      "duration_ms": 101.4866828918457,
      "expected_cancel_reason": null,
      "actual_cancel_reason": null,
      "cancel_reason_match": true
    },
    {
      "scenario": "延时超长",
      "status": "PASS",
      "duration_ms": 101.55224800109863,
      "expected_cancel_reason": "DELAY_TOO_LONG",
      "actual_cancel_reason": "DELAY_TOO_LONG",
      "cancel_reason_match": true
    },
    {
      "scenario": "延时正常",
      "status": "PASS",
      "duration_ms": 101.44686698913574,
      "expected_cancel_reason": null,
      "actual_cancel_reason": null,
      "cancel_reason_match": true
    },
    {
      "scenario": "无效建筑",
      "status": "PASS",
      "duration_ms": 101.32694244384766,
      "expected_cancel_reason": "BUILDING_NOT_FOUND",
      "actual_cancel_reason": "BUILDING_NOT_FOUND",
      "cancel_reason_match": true
    },
    {
      "scenario": "正常建筑",
      "status": "PASS",
      "duration_ms": 101.3038158416748,
      "expected_cancel_reason": null,
      "actual_cancel_reason": null,
      "cancel_reason_match": true
    },
    {
      "scenario": "无建筑ID",
      "status": "PASS",
      "duration_ms": 101.51314735412598,
      "expected_cancel_reason": "REQUIRED_FIELD_MISSING",
      "actual_cancel_reason": "REQUIRED_FIELD_MISSING",
      "cancel_reason_match": true
    },
    {
      "scenario": "完整参数",
      "status": "PASS",
      "duration_ms": 101.75275802612305,
      "expected_cancel_reason": null,
      "actual_cancel_reason": null,
      "cancel_reason_match": true
    }
  ]
}